---
import Layout from '../layouts/Slide.astro';

const problems = [
  { 
    id: '01', 
    title: 'Evaluación Manual', 
    desc: 'Dependencia crítica del criterio personal, generando inconsistencia.',
    icon: 'M12 4a4 4 0 1 0 0 8 4 4 0 0 0 0-8zM6 8a6 6 0 1 1 12 0A8 8 0 0 0 2 16h20a8 8 0 0 0-16 0z'
  },
  { 
    id: '02', 
    title: 'Datos Ignorados', 
    desc: 'La información histórica no se procesa para predecir riesgos futuros.',
    icon: 'M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-12-2h10v-2H7v2zm0-4h10v-2H7v2zm0-4h10V7H7v2z' 
  },
  { 
    id: '03', 
    title: 'Riesgo de Morosidad', 
    desc: 'Falta de modelos predictivos que identifiquen la capacidad de pago real.',
    icon: 'M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z' 
  },
  { 
    id: '04', 
    title: 'Falta de Tecnología', 
    desc: 'Proceso lento sin IA, perdiendo competitividad frente a la banca digital.',
    icon: 'M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h16c1.11 0 2-.9 2-2V8c0-1.11-.89-2-2-2zM15 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1z' 
  }
];
---

<style>
  @import url('https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;600;700;800&display=swap');

  .slide-container {
    position: relative;
    width: 100%;
    height: 100vh;
    background-color: #ffffff;
    
    /* FONDO VIVO: Puntos moviéndose */
    background-image: radial-gradient(#d1d5db 1.5px, transparent 1.5px);
    background-size: 30px 30px;
    animation: bgMove 60s linear infinite;
    
    display: flex;
    font-family: 'Manrope', system-ui, sans-serif;
    overflow: hidden;
  }

  /* BARRA LATERAL */
  .left-bar {
    width: 80px;
    height: 100%;
    background: #1D4E89;
    flex-shrink: 0;
    z-index: 10;
    box-shadow: 4px 0 20px rgba(0,0,0,0.1);
  }

  /* CÍRCULO DE FONDO (Respirando) */
  .bg-circle {
    position: absolute;
    top: -200px;
    right: -200px;
    width: 700px;
    height: 700px;
    background: radial-gradient(circle, rgba(46, 99, 229, 0.04) 0%, rgba(255,255,255,0) 60%);
    border-radius: 50%;
    z-index: 0;
    animation: pulseBig 8s ease-in-out infinite;
  }

  /* --- CIRCUITO ACTIVO --- */
  .circuit-svg {
    position: absolute;
    top: 22%;
    left: 80px;
    width: 250px;
    height: 400px;
    z-index: 1;
    pointer-events: none;
    opacity: 0.6;
  }

  .circuit-path {
    fill: none;
    stroke: #1D4E89;
    stroke-width: 2;
    stroke-dasharray: 10, 20;
    /* Efecto de datos fluyendo por el cable */
    animation: dash 2s linear infinite; 
  }

  .main-content {
    flex-grow: 1;
    padding: 3rem 5rem;
    display: flex;
    flex-direction: column;
    justify-content: center;
    z-index: 5;
    max-width: 1400px;
  }

  /* ENCABEZADO */
  .header-area {
    margin-bottom: 3.5rem;
    position: relative;
  }

  .subtitle {
    display: block;
    font-size: 8rem; 
    color: transparent;
    -webkit-text-stroke: 2px rgba(29, 78, 137, 0.08);
    font-weight: 800;
    line-height: 0.8;
    position: absolute;
    top: -50px;
    left: -10px;
    z-index: -1;
    /* Movimiento sutil */
    animation: floatTitle 6s ease-in-out infinite;
  }

  h1 {
    font-size: 3.5rem;
    font-weight: 800;
    color: #111827;
    margin: 0;
    line-height: 1.1;
    padding-left: 10px;
    opacity: 0;
    animation: slideInLeft 0.8s ease-out 0.2s forwards;
  }

  /* GRID */
  .cards-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2.5rem;
  }

  /* --- TARJETA INTELIGENTE --- */
  .problem-card {
    position: relative;
    background: #ffffff;
    border: 1px solid rgba(0, 0, 0, 0.06);
    padding: 2rem;
    display: grid;
    grid-template-columns: 70px 1fr;
    gap: 1.5rem;
    align-items: center;
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.03);
    
    opacity: 0;
    /* Animación de entrada */
    animation: cardEntry 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
    
    overflow: hidden; /* Importante para el brillo */
  }

  /* Staggering (Entrada en cascada) */
  .problem-card:nth-child(1) { animation-delay: 0.3s; }
  .problem-card:nth-child(2) { animation-delay: 0.5s; }
  .problem-card:nth-child(3) { animation-delay: 0.7s; }
  .problem-card:nth-child(4) { animation-delay: 0.9s; }

  /* ANIMACIÓN AUTOMÁTICA: FLOTACIÓN (Idle) */
  /* Hacemos que floten suavemente en tiempos distintos */
  .problem-card:nth-child(odd) { animation: cardEntry 0.6s forwards, floatCard 6s ease-in-out infinite 1s; }
  .problem-card:nth-child(even) { animation: cardEntry 0.6s forwards, floatCard 7s ease-in-out infinite 1.5s; }


  /* ANIMACIÓN AUTOMÁTICA: BRILLO DE ESCANEO */
  /* Una luz pasa por la tarjeta cada 5 segundos */
  .problem-card::after {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 50%;
    height: 100%;
    background: linear-gradient(to right, transparent, rgba(29, 78, 137, 0.05), transparent);
    transform: skewX(-25deg);
    z-index: 1;
    /* Animación infinita */
    animation: scanShine 6s ease-in-out infinite;
  }
  
  /* Retrasamos el brillo por tarjeta */
  .problem-card:nth-child(1)::after { animation-delay: 2s; }
  .problem-card:nth-child(2)::after { animation-delay: 3.5s; }
  .problem-card:nth-child(3)::after { animation-delay: 5s; }
  .problem-card:nth-child(4)::after { animation-delay: 6.5s; }


  /* --- INDICADOR DE ERROR (Punto Rojo) --- */
  /* Simula que el sistema ha detectado un fallo */
  .status-dot {
    position: absolute;
    top: 15px;
    right: 15px;
    width: 8px;
    height: 8px;
    background-color: #ef4444; /* Rojo Alerta */
    border-radius: 50%;
    box-shadow: 0 0 0 2px rgba(255,255,255,1);
    
    /* Parpadeo infinito */
    animation: blinkError 2s infinite;
  }


  /* --- ICONO CON LATIDO --- */
  .icon-box {
    width: 70px;
    height: 70px;
    background: #f0f5ff; /* Azul muy suave */
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 12px;
    color: #1D4E89;
    position: relative;
    z-index: 2;
  }

  /* Onda expansiva constante */
  .icon-box::before {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 12px;
    border: 1px solid #2E63E5;
    opacity: 0;
    animation: ripple 3s infinite;
  }

  .icon-box svg {
    width: 32px;
    height: 32px;
    fill: currentColor;
  }

  /* TEXTO */
  .card-content {
    display: flex;
    flex-direction: column;
    z-index: 2;
  }

  .card-title {
    font-size: 1.35rem;
    font-weight: 700;
    color: #111827;
    margin-bottom: 0.5rem;
  }

  .card-desc {
    font-size: 0.95rem;
    color: #4b5563;
    line-height: 1.5;
  }

  /* KEYFRAMES */
  @keyframes bgMove {
    0% { background-position: 0 0; }
    100% { background-position: 100px 100px; }
  }

  @keyframes dash {
    to { stroke-dashoffset: -200; }
  }

  @keyframes slideInLeft {
    from { opacity: 0; transform: translateX(-30px); }
    to { opacity: 1; transform: translateX(0); }
  }

  @keyframes cardEntry {
    from { opacity: 0; transform: translateY(30px) scale(0.95); }
    to { opacity: 1; transform: translateY(0) scale(1); }
  }

  @keyframes floatCard {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-8px); } /* Flota suavemente */
  }

  @keyframes floatTitle {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
  }

  @keyframes ripple {
    0% { transform: scale(0.9); opacity: 1; }
    100% { transform: scale(1.5); opacity: 0; }
  }

  @keyframes scanShine {
    0%, 10% { left: -100%; }
    20%, 100% { left: 150%; } /* Pasa rápido y espera mucho */
  }

  @keyframes pulseBig {
    0%, 100% { transform: scale(1); opacity: 0.5; }
    50% { transform: scale(1.05); opacity: 0.3; }
  }
  
  @keyframes blinkError {
    0%, 100% { opacity: 1; transform: scale(1); background-color: #ef4444; box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
    50% { opacity: 0.6; transform: scale(0.9); }
    70% { box-shadow: 0 0 0 6px rgba(239, 68, 68, 0); } /* Onda roja */
  }
</style>

<Layout title="Problemática">
  <div class="slide-container">
    <div class="bg-circle"></div>
    <div class="left-bar"></div>
    
    <!-- SVG Animado de Flujo de Datos -->
    <svg class="circuit-svg" viewBox="0 0 200 300">
      <!-- Línea que conecta el título con las tarjetas -->
      <path class="circuit-path" d="M10,20 Q60,20 60,60 V220 Q60,260 180,260" />
      <!-- Ramas secundarias para decorar -->
      <path class="circuit-path" d="M60,100 H120" style="animation-delay: 0.5s"/>
      <path class="circuit-path" d="M60,180 H100" style="animation-delay: 1s"/>
    </svg>

    <div class="main-content">
      
      <div class="header-area">
        <span class="subtitle">01</span>
        <h1>Problemática</h1>
      </div>

      <div class="cards-grid">
        {problems.map((item) => (
          <div class="problem-card">
            
            <!-- Indicador de Estado (Punto Rojo Parpadeante) -->
            <div class="status-dot" title="Problema Detectado"></div>

            <div class="icon-box">
              <svg viewBox="0 0 24 24">
                <path d={item.icon}></path>
              </svg>
            </div>

            <div class="card-content">
              <div class="card-title">{item.title}</div>
              <div class="card-desc">{item.desc}</div>
            </div>

          </div>
        ))}
      </div>

    </div>
  </div>
</Layout>